<div class="main">
	<div class="container">
		<div class="row">
			<div class="span12">
				<meta name="google-signin-clientid" content="CLIENT_ID" />
				<meta name="google-signin-scope" content="https://www.googleapis.com/auth/plus.login" />
				<meta name="google-signin-requestvisibleactions" content="http://schemas.google.com/AddActivity" />
				<meta name="google-signin-cookiepolicy" content="single_host_origin" />		
			</div> <!-- /span12 -->	
		</div> <!-- /row -->
		<br/>
		<div class="widget big-stats-container stacked">
			<div class="widget-content">
				Instruction!!
			</div>
		</div>
		
		<div class="row">
			<div class="span6">
				<div class="widget stacker">
					<div class="widget-header">
						<i class="icon-star"></i>
						<h3>Player 1</h3>
					</div> <!-- /widget-header -->
				
					<div class="widget-content">
					
						<form action="" id="validation-form" class="">
							<fieldset>
								<div class="control-group">
									<label class="control-label" for="validateSelect">Select Bot to play against</label>
									<div class="controls">
										<select id="validateSelect" name="validateSelect">
											<option value="">Select...</option>
										</select>
									</div>
								</div>
								<br>Code your own bot below.<br>
								<div class="control-group">
									<label class="control-label" for="">Bot Name</label>
									<div class="controls">
										<textarea class="span4" name="botname" id="botname" rows="1"></textarea>
									</div>
									
									<label class="control-label" for="message">Your Code</label>
									
									<div class="controls">
										<textarea class="span4" name="code" id="code" rows="4"></textarea>
									</div>
									<label class="control-label" for="">Language</label>
									<div class="controls">
										<select id="language" name="language">
											<option value="">Select...</option>
											<option value="JAVA">Java(NOT WORKING)</option>
											<option value="PYTHON">Python</option>
											<option value="RUBY">Ruby</option>
											
										</select>
									</div>
								</div>
				          
								<div class="form-action">
									<!--<button type="submit" class="btn btn-danger btn" id="savebot">Save bot</button>&nbsp;&nbsp;-->
									
								</div>
							</fieldset>
						</form>
						<input id="saveBot" type="submit" value="Play" class="btn btn-danger btn">
					</div> <!-- /widget-content -->
				</div> <!-- /widget -->
			</div> <!-- /span6 -->
		
			<div class="span6">
				<div class="widget stacked">		
					<div class="widget-header">
						<i class="icon-list-alt"></i>
						<h3>Bot</h3>
					</div> <!-- /widget-header -->
					<div class="widget-content" style="height:250px;" id="whoWin">
						Hi
					</div> <!-- /widget-content -->
				</div> <!-- /widget -->
			</div> <!-- /span6 -->
      	</div> <!-- /row -->
    </div> <!-- /container -->
</div> <!-- /main -->


<script>
$(function() {
    console.log( "ready!" );
});
</script>
<script type="text/javascript">

function init() {
	var callback = function () {
		getBotList();
	};

	//var apisToLoad = 1;
	gapi.client.load('rockpaperscissorslizardspock', 'v1', callback, 'https://smu-is429-group-project.appspot.com/_ah/api');

    document.getElementById('saveBot').onclick = function() {
            saveBot();
    }

}
function saveBot(){
	//Validate the entries
	var _BotName = document.getElementById('botname').value;
	var _Code = document.getElementById('code').value;
	var _AiBotId = document.getElementById('validateSelect').value;
	var _BotLanguage = document.getElementById('language').value;
    
	//Build the Request Object
	var requestData = {};
	requestData.playerBotName = _BotName;
	requestData.playerBotCode = _Code;
	requestData.aiBotId = _AiBotId;
	requestData.language = _BotLanguage;
	
	//Build the loop Request Object
	var loopRequestData = {};
	var _GameID = '';
	//Api Calling here
	gapi.client.rockpaperscissorslizardspock.newGame(requestData).execute(function(resp) {
		if (!resp.code) {
			//Just logging to console now, you can do your check here/display message
			console.log('inside if!resp.cpde');
			_GameID = resp.gameSession.id;
			console.log(_GameID);
			loopRequestData.gameID = _GameID;
			console.log('Before for loop');
      for (var i=0;i<8;i++)
      {
				nextGame(_GameID);
				
      }
			console.log('outside for loop');
		}
		
		/*
		console.log(resp);
		console.log(resp.gameSession.id + ":" + resp.gameSession.roundNo + ":" + resp.gameSession.playerMove+ ":" + resp.gameSession.aiMove+ ":" + resp.gameSession.hasPlayerWon);
		if(resp.gameSession.hasPlayerWon=1){
			document.getElementById('whoWin').innerHTML = "You Win Bitch";
		}else if(resp.gameSession.hasPlayerWon=0){
			document.getElementById('whoWin').innerHTML = "You Draw Bitch";
		}else{
			document.getElementById('whoWin').innerHTML = "You Lose Bitch";
		} */
	});
}

function nextGame(gameID){
	console.log("inside nextGame function");
	console.log(gameID);
	var roundNo = 0; 
	var requestData = {};
	requestData.gameID = gameID;
	console.log(requestData);
	gapi.client.rockpaperscissorslizardspock.getNextMove(requestData).execute(function(resp) {
		console.log('getnextmove');
		console.log(resp);
		roundNo = resp.gameSession.roundNo;
	});
	console.log(roundNo);
	return roundNo;
}
//extra line here
function getBotList() {
	console.log("inside list quotes");
	gapi.client.rockpaperscissorslizardspock.getBotList().execute(function(resp) {
		console.log(resp);
		if (!resp.code) {
			resp.items = resp.items || [];
			var result = "<option value=''>Select...</option>";
			for (var i=0;i<resp.items.length;i++) {
				console.log("loop");
				//result = result + resp.items[i].name +"</BR>";
				result = result+"<option value='"+resp.items[i].id+"'>"+resp.items[i].name + "</option>";
			}
			document.getElementById('validateSelect').innerHTML = result;
		}
	});
}

(function() {
	var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	po.src = 'https://apis.google.com/js/plusone.js?onload=onLoadCallback';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();


</script>
<script src="https://apis.google.com/js/client.js?onload=init"></script>